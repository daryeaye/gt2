<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lost Treasure Pt2 Mrs James</title>
  <!-- Load Caveat font for draggable boxes -->
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">
  <style>
    /* Center the app container on the screen */
    body, html {
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #app-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    /* The container remains 960px x 540px */
    #container {
      position: relative;
      width: 960px;
      height: 540px;
      border: 1px solid #ccc;
      background: white;
      overflow: hidden;
    }
    /* Pages are absolutely positioned inside the container */
    .page {
      position: absolute;
      top: 0;
      left: 0;
      width: 960px;
      height: 540px;
      display: none;
      /* Background will be set inline per page */
    }
    .page.active {
      display: block;
    }
    /* Style for clickable boxes */
    .box {
      position: absolute;
      border: 1px solid red;
      background-color: rgba(255, 0, 0, 0.3); /* default background */
    }
    /* Transparent boxes */
    .transparent {
      background-color: transparent !important;
    }
    /* Styling for typeable boxes: now with light blue 50% transparent background and font size 22px */
    input.typeable {
      position: absolute;
      font-family: "Comic Sans MS", sans-serif;
      font-size: 22px;
      border: 1px solid black;
      background: rgba(173, 216, 230, 0.5);
    }
    /* Draggable boxes for Page 11 */
    .draggable-box {
      position: absolute;
      font-family: 'Caveat', cursive;
      font-size: 40px;
      font-weight: bold;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 1px solid red;
      background-color: rgba(255, 255, 255, 0.7);
      cursor: move;
      user-select: none;
    }
    /* Navigation buttons styling */
    #nav-buttons {
      margin-top: 10px;
    }
    button {
      font-family: "Comic Sans MS", sans-serif;
      font-size: 20px;
      background-color: lightblue;
      border: none;
      padding: 10px 20px;
      margin: 0 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="app-container">
    <div id="container">
      <!-- Page 1 with PDF links and background image 2-01.jpg -->
      <div id="page1" class="page active" style="background: url('https://daryeaye.github.io/gt2/2-01.jpg') no-repeat center/cover;">
        <a href="https://daryeaye.github.io/geotopia/GT1%20Officer+.pdf" target="_blank">
          <div class="box transparent" style="left:10px; top:366px; width:130px; height:114px;"></div>
        </a>
        <a href="https://daryeaye.github.io/geotopia/GT1%20Professor+.pdf" target="_blank">
          <div class="box transparent" style="left:149px; top:366px; width:130px; height:114px;"></div>
        </a>
        <a href="https://daryeaye.github.io/geotopia/GT1%20Hacker+.pdf" target="_blank">
          <div class="box transparent" style="left:288px; top:366px; width:130px; height:114px;"></div>
        </a>
      </div>
      
      <!-- Page 2 (blank) with background 2-02.jpg -->
      <div id="page2" class="page" style="background: url('https://daryeaye.github.io/gt2/2-02.jpg') no-repeat center/cover;"></div>
      
      <!-- Page 3 with two GeoGebra boxes and background 2-03.jpg -->
      <div id="page3" class="page" style="background: url('https://daryeaye.github.io/gt2/2-03.jpg') no-repeat center/cover;">
        <a href="https://www.geogebra.org/m/nrmkmuvz" target="_blank">
          <div class="box transparent" style="left:115px; top:59px; width:189px; height:180px;"></div>
        </a>
        <a href="https://www.geogebra.org/m/wzjqwpbj" target="_blank">
          <div class="box transparent" style="left:115px; top:314px; width:189px; height:192px;"></div>
        </a>
      </div>
      
      <!-- Page 4 with background 2-04.jpg -->
      <div id="page4" class="page" style="background: url('https://daryeaye.github.io/gt2/2-04.jpg') no-repeat center/cover;">
        <!-- Right box: clickable GeoGebra link -->
        <a href="https://www.geogebra.org/m/nrmkmuvz" target="_blank">
          <div class="box transparent" style="left:702px; top:162px; width:190px; height:181px;"></div>
        </a>
        <!-- Bottom-left typeable box: centered text -->
        <input type="text" id="p4box1" class="typeable" style="left:289px; top:414px; width:92px; height:46px; text-align: center;" />
      </div>
      
      <!-- Page 5 with background 2-05.jpg -->
      <div id="page5" class="page" style="background: url('https://daryeaye.github.io/gt2/2-05.jpg') no-repeat center/cover;">
        <!-- Top-right box: clickable GeoGebra link -->
        <a href="https://www.geogebra.org/m/nrmkmuvz" target="_blank">
          <div class="box transparent" style="left:702px; top:162px; width:190px; height:181px;"></div>
        </a>
        <!-- Middle-top typeable box (answer must be "45") -->
        <input type="text" id="middleTopInput" class="typeable" style="left:486px; top:252px; width:92px; height:46px; text-align: center;" />
        <!-- Middle-bottom typeable box (answer must be "45") -->
        <input type="text" id="middleBottomInput" class="typeable" style="left:479px; top:320px; width:91px; height:47px; text-align: center;" />
        <!-- Bottom typeable box -->
        <input type="text" id="bottomInput" class="typeable" style="left:45px; top:433px; width:622px; height:87px; text-align: left;" />
      </div>
      
      <!-- Page 6 with background 2-06.jpg -->
      <div id="page6" class="page" style="background: url('https://daryeaye.github.io/gt2/2-06.jpg') no-repeat center/cover;">
        <!-- Top-right box: clickable GeoGebra link -->
        <a href="https://www.geogebra.org/m/nrmkmuvz" target="_blank">
          <div class="box transparent" style="left:702px; top:162px; width:190px; height:181px;"></div>
        </a>
        <!-- Middle box: typeable input that requires answer "30" -->
        <input type="text" id="page6MiddleInput" class="typeable" style="left:473px; top:314px; width:92px; height:46px; text-align: center;" />
        <!-- Bottom box: typeable input -->
        <input type="text" id="page6BottomInput" class="typeable" style="left:45px; top:427px; width:622px; height:87px; text-align: left;" />
      </div>
      
      <!-- Page 7 (blank) with background 2-07.jpg -->
      <div id="page7" class="page" style="background: url('https://daryeaye.github.io/gt2/2-07.jpg') no-repeat center/cover;"></div>
      
      <!-- Page 8 with background 2-08.jpg -->
      <div id="page8" class="page" style="background: url('https://daryeaye.github.io/gt2/2-08.jpg') no-repeat center/cover;">
        <!-- Top-right typeable box -->
        <input type="text" id="page8TopRightInput" class="typeable" style="left:621px; top:75px; width:96px; height:49px; text-align: center;" />
        <!-- Top-middle typeable box -->
        <input type="text" id="page8TopMiddleInput" class="typeable" style="left:432px; top:75px; width:96px; height:49px; text-align: center;" />
        <!-- Top-left typeable box -->
        <input type="text" id="page8TopLeftInput" class="typeable" style="left:243px; top:75px; width:96px; height:49px; text-align: center;" />
        <!-- Left big box: clickable link (transparent) -->
        <a href="https://www.geogebra.org/m/wzjqwpbj" target="_blank">
          <div class="box transparent" style="left:41px; top:161px; width:190px; height:192px;"></div>
        </a>
        <!-- New typeable box -->
        <input type="text" id="page8ExtraInput" class="typeable" style="left:772px; top:233px; width:146px; height:49px; text-align: center;" />
        <!-- Bottom-right yellowish box with gif -->
        <div class="box transparent" style="left:460px; top:299px; width:209px; height:133px; background-color: #FFEB99;">
          <img src="https://daryeaye.github.io/gt2/triangleinequality.gif" style="width:100%; height:100%;" alt="Triangle Inequality">
        </div>
      </div>
      
      <!-- Page 9 with background 2-09.jpg -->
      <div id="page9" class="page" style="background: url('https://daryeaye.github.io/gt2/2-09.jpg') no-repeat center/cover;">
        <!-- Big square: clickable link -->
        <a href="https://www.geogebra.org/m/wzjqwpbj" target="_blank">
          <div class="box transparent" style="left:740px; top:73px; width:190px; height:192px;"></div>
        </a>
        <!-- Gif display -->
        <div class="box transparent" style="left:711px; top:358px; width:210px; height:133px;">
          <img src="https://daryeaye.github.io/gt2/triangleinequality.gif" style="width:100%; height:100%;" alt="Triangle Inequality">
        </div>
        <!-- Column 1 -->
        <input type="text" id="p9box3" class="typeable" style="left:48px; top:269px; width:173px; height:48px; text-align: center;" />
        <input type="text" id="p9box4" class="typeable" style="left:48px; top:323px; width:173px; height:49px; text-align: center;" />
        <input type="text" id="p9box5" class="typeable" style="left:48px; top:378px; width:173px; height:49px; text-align: center;" />
        <input type="text" id="p9box6" class="typeable" style="left:48px; top:433px; width:173px; height:49px; text-align: center;" />
        <!-- Column 2 -->
        <input type="text" id="p9box7" class="typeable" style="left:256px; top:269px; width:135px; height:48px; text-align: center;" />
        <input type="text" id="p9box8" class="typeable" style="left:256px; top:323px; width:135px; height:49px; text-align: center;" />
        <input type="text" id="p9box9" class="typeable" style="left:256px; top:378px; width:135px; height:49px; text-align: center;" />
        <input type="text" id="p9box10" class="typeable" style="left:256px; top:433px; width:135px; height:49px; text-align: center;" />
        <!-- Column 3 -->
        <input type="text" id="p9box11" class="typeable" style="left:454px; top:269px; width:65px; height:48px; text-align: center;" />
        <input type="text" id="p9box12" class="typeable" style="left:454px; top:323px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p9box13" class="typeable" style="left:454px; top:378px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p9box14" class="typeable" style="left:454px; top:433px; width:65px; height:49px; text-align: center;" />
        <!-- Column 4 -->
        <input type="text" id="p9box15" class="typeable" style="left:541px; top:269px; width:65px; height:48px; text-align: center;" />
        <input type="text" id="p9box16" class="typeable" style="left:541px; top:323px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p9box17" class="typeable" style="left:541px; top:378px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p9box18" class="typeable" style="left:541px; top:433px; width:65px; height:49px; text-align: center;" />
      </div>
      
      <!-- Page 10 with background 2-10.jpg (same as Page 9 content) -->
      <div id="page10" class="page" style="background: url('https://daryeaye.github.io/gt2/2-10.jpg') no-repeat center/cover;">
        <!-- Big square: clickable link -->
        <a href="https://www.geogebra.org/m/wzjqwpbj" target="_blank">
          <div class="box transparent" style="left:740px; top:73px; width:190px; height:192px;"></div>
        </a>
        <!-- Gif display -->
        <div class="box transparent" style="left:711px; top:358px; width:210px; height:133px;">
          <img src="https://daryeaye.github.io/gt2/triangleinequality.gif" style="width:100%; height:100%;" alt="Triangle Inequality">
        </div>
        <!-- Column 1 -->
        <input type="text" id="p10box3" class="typeable" style="left:48px; top:269px; width:173px; height:48px; text-align: center;" />
        <input type="text" id="p10box4" class="typeable" style="left:48px; top:323px; width:173px; height:49px; text-align: center;" />
        <input type="text" id="p10box5" class="typeable" style="left:48px; top:378px; width:173px; height:49px; text-align: center;" />
        <input type="text" id="p10box6" class="typeable" style="left:48px; top:433px; width:173px; height:49px; text-align: center;" />
        <!-- Column 2 -->
        <input type="text" id="p10box7" class="typeable" style="left:256px; top:269px; width:135px; height:48px; text-align: center;" />
        <input type="text" id="p10box8" class="typeable" style="left:256px; top:323px; width:135px; height:49px; text-align: center;" />
        <input type="text" id="p10box9" class="typeable" style="left:256px; top:378px; width:135px; height:49px; text-align: center;" />
        <input type="text" id="p10box10" class="typeable" style="left:256px; top:433px; width:135px; height:49px; text-align: center;" />
        <!-- Column 3 -->
        <input type="text" id="p10box11" class="typeable" style="left:454px; top:269px; width:65px; height:48px; text-align: center;" />
        <input type="text" id="p10box12" class="typeable" style="left:454px; top:323px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p10box13" class="typeable" style="left:454px; top:378px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p10box14" class="typeable" style="left:454px; top:433px; width:65px; height:49px; text-align: center;" />
        <!-- Column 4 -->
        <input type="text" id="p10box15" class="typeable" style="left:541px; top:269px; width:65px; height:48px; text-align: center;" />
        <input type="text" id="p10box16" class="typeable" style="left:541px; top:323px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p10box17" class="typeable" style="left:541px; top:378px; width:65px; height:49px; text-align: center;" />
        <input type="text" id="p10box18" class="typeable" style="left:541px; top:433px; width:65px; height:49px; text-align: center;" />
      </div>
      
      <!-- Page 11 with background 2-11.jpg: 4 draggable boxes with names -->
      <div id="page11" class="page" style="background: url('https://daryeaye.github.io/gt2/2-11.jpg') no-repeat center/cover;">
        <div id="draggable1" class="draggable draggable-box" style="left:783px; top:135px; width:128px; height:52px;">
          Third
        </div>
        <div id="draggable2" class="draggable draggable-box" style="left:766px; top:194px; width:162px; height:59px;">
          Smaller
        </div>
        <div id="draggable3" class="draggable draggable-box" style="left:802px; top:260px; width:91px; height:61px;">
          Sum
        </div>
        <div id="draggable4" class="draggable draggable-box" style="left:764px; top:337px; width:167px; height:50px;">
          Greater
        </div>
      </div>
      
      <!-- Page 12 with background 2-12.jpg: 4 typeable boxes with specific answers -->
      <div id="page12" class="page" style="background: url('https://daryeaye.github.io/gt2/2-12.jpg') no-repeat center/cover;">
        <!-- Box 1: Answer must be "yes" -->
        <input type="text" id="p12box1" class="typeable" style="left:24px; top:125px; width:563px; height:44px; text-align: center;" />
        <!-- Box 2: Answer must be "no" -->
        <input type="text" id="p12box2" class="typeable" style="left:25px; top:220px; width:563px; height:43px; text-align: center;" />
        <!-- Box 3: Answer must be "no" -->
        <input type="text" id="p12box3" class="typeable" style="left:25px; top:322px; width:563px; height:44px; text-align: center;" />
        <!-- Box 4: Answer must be "yes" -->
        <input type="text" id="p12box4" class="typeable" style="left:24px; top:413px; width:563px; height:44px; text-align: center;" />
      </div>
      
      <!-- Page 13 with background 2-13.jpg: Multiple typeable boxes with specific answers -->
      <div id="page13" class="page" style="background: url('https://daryeaye.github.io/gt2/2-13.jpg') no-repeat center/cover;">
        <!-- Top large typeable box -->
        <input type="text" id="p13top" class="typeable" style="left:344px; top:168px; width:579px; height:60px; text-align: center;" />
        <!-- Top row of small boxes -->
        <input type="text" id="p13box1" class="typeable" style="left:695px; top:253px; width:89px; height:64px; text-align: center;" />
        <input type="text" id="p13box2" class="typeable" style="left:799px; top:253px; width:89px; height:64px; text-align: center;" />
        <!-- Bottom row of small boxes -->
        <input type="text" id="p13box3" class="typeable" style="left:644px; top:328px; width:89px; height:65px; text-align: center;" />
        <input type="text" id="p13box4" class="typeable" style="left:747px; top:328px; width:89px; height:65px; text-align: center;" />
        <input type="text" id="p13box5" class="typeable" style="left:850px; top:328px; width:89px; height:65px; text-align: center;" />
      </div>
      
      <!-- Page 14 with background 2-14.jpg: Top row (9 boxes) and Bottom row (3 boxes) -->
      <div id="page14" class="page" style="background: url('https://daryeaye.github.io/gt2/2-14.jpg') no-repeat center/cover;">
         <!-- Top row: 9 boxes (blue boxes now transparent) -->
         <input type="text" id="p14box1" class="typeable" style="position: absolute; left:10px; top:138px; width:89px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box2" class="typeable" style="position: absolute; left:117px; top:138px; width:88px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box3" class="typeable" style="position: absolute; left:223px; top:138px; width:89px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box4" class="typeable" style="position: absolute; left:329px; top:138px; width:89px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box5" class="typeable" style="position: absolute; left:436px; top:138px; width:88px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box6" class="typeable" style="position: absolute; left:542px; top:138px; width:89px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box7" class="typeable" style="position: absolute; left:648px; top:138px; width:89px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box8" class="typeable" style="position: absolute; left:755px; top:138px; width:88px; height:64px; text-align: center; background-color: transparent;" />
         <input type="text" id="p14box9" class="typeable" style="position: absolute; left:861px; top:138px; width:89px; height:64px; text-align: center; background-color: transparent;" />
         <!-- Bottom row: 3 boxes -->
         <input type="text" id="p14box10" class="typeable" style="position: absolute; left:159px; top:284px; width:94px; height:47px; text-align: center;" />
         <input type="text" id="p14box11" class="typeable" style="position: absolute; left:568px; top:284px; width:75px; height:47px; text-align: center;" />
         <input type="text" id="p14box12" class="typeable" style="position: absolute; left:695px; top:284px; width:142px; height:47px; text-align: center;" />
      </div>
      
      <!-- Page 15 with background 2-15.jpg: Top row (11 small boxes) and Bottom (wide yellow box with Unlock button) -->
      <div id="page15" class="page" style="background: url('https://daryeaye.github.io/gt2/2-15.jpg') no-repeat center/cover;">
         <!-- Top row: 11 boxes -->
         <input type="text" id="p15box1" class="typeable" style="position: absolute; left:390px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box2" class="typeable" style="position: absolute; left:438px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box3" class="typeable" style="position: absolute; left:486px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box4" class="typeable" style="position: absolute; left:534px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box5" class="typeable" style="position: absolute; left:582px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box6" class="typeable" style="position: absolute; left:630px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box7" class="typeable" style="position: absolute; left:678px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box8" class="typeable" style="position: absolute; left:726px; top:216px; width:39px; height:57px; text-align: center;" />
         <input type="text" id="p15box9" class="typeable" style="position: absolute; left:775px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box10" class="typeable" style="position: absolute; left:823px; top:216px; width:38px; height:57px; text-align: center;" />
         <input type="text" id="p15box11" class="typeable" style="position: absolute; left:871px; top:216px; width:38px; height:57px; text-align: center;" />
         <!-- Bottom wide yellow box -->
         <input type="text" id="p15yellow" class="typeable" style="position: absolute; left:509px; top:411px; width:281px; height:65px; text-align: center; background-color: #FFEB99;" />
         <!-- Unlock button below the yellow box -->
         <button id="unlockBtn" style="position: absolute; left:509px; top:480px; width:281px; height:30px; text-align: center; font-family: 'Comic Sans MS', sans-serif; font-size: 16px;">Unlock</button>
      </div>
      
    </div>
    <!-- Navigation buttons -->
    <div id="nav-buttons">
      <button id="prev-btn" onclick="prevPage()">Previous</button>
      <button id="next-btn" onclick="nextPage()">Next</button>
    </div>
  </div>
  
  <script>
    let currentPage = 1;
    const totalPages = 15;
    
    function showPage(pageNum) {
      for (let i = 1; i <= totalPages; i++) {
        document.getElementById('page' + i).classList.remove('active');
      }
      document.getElementById('page' + pageNum).classList.add('active');
      if (pageNum === 1) {
        document.getElementById("prev-btn").style.display = "none";
        document.getElementById("next-btn").style.display = "inline-block";
      } else if (pageNum === totalPages) {
        document.getElementById("prev-btn").style.display = "inline-block";
        document.getElementById("next-btn").style.display = "none";
      } else {
        document.getElementById("prev-btn").style.display = "inline-block";
        document.getElementById("next-btn").style.display = "inline-block";
      }
    }
    
    function nextPage() {
      // Page 5: check that both middle boxes equal "45"
      if (currentPage === 5) {
        const topVal = document.getElementById("middleTopInput").value.trim().toLowerCase();
        const bottomVal = document.getElementById("middleBottomInput").value.trim().toLowerCase();
        if (topVal !== "45" || bottomVal !== "45") {
          alert("❌ Nah. Mrs. James needs you to be more careful!");
          return;
        }
      }
      // Page 6: check that the middle box equals "30"
      if (currentPage === 6) {
        const page6Val = document.getElementById("page6MiddleInput").value.trim().toLowerCase();
        if (page6Val !== "30") {
          alert("❌ Nah. Mrs. James needs you to be more careful!");
          return;
        }
      }
      // Page 9 and 10: check that all 16 boxes are filled.
      if (currentPage === 9 || currentPage === 10) {
        const ids = currentPage === 9 
          ? ["p9box3","p9box4","p9box5","p9box6","p9box7","p9box8","p9box9","p9box10","p9box11","p9box12","p9box13","p9box14","p9box15","p9box16","p9box17","p9box18"]
          : ["p10box3","p10box4","p10box5","p10box6","p10box7","p10box8","p10box9","p10box10","p10box11","p10box12","p10box13","p10box14","p10box15","p10box16","p10box17","p10box18"];
        for (let id of ids) {
          if(document.getElementById(id).value.trim() === ""){
            alert("❌ Nah. Mrs. James needs you to be more careful!");
            return;
          }
        }
      }
      // Page 12: check answers
      if (currentPage === 12) {
        if (
          document.getElementById("p12box1").value.trim().toLowerCase() !== "yes" ||
          document.getElementById("p12box2").value.trim().toLowerCase() !== "no" ||
          document.getElementById("p12box3").value.trim().toLowerCase() !== "no" ||
          document.getElementById("p12box4").value.trim().toLowerCase() !== "yes"
        ) {
          alert("❌ Nah. Mrs. James needs you to be more careful!");
          return;
        }
      }
      // Page 13: check answers for the small boxes with conditions
      if (currentPage === 13) {
        if (
          document.getElementById("p13box1").value.trim().toLowerCase() !== "3" ||
          document.getElementById("p13box2").value.trim().toLowerCase() !== "4" ||
          document.getElementById("p13box3").value.trim().toLowerCase() !== "5" ||
          document.getElementById("p13box4").value.trim().toLowerCase() !== "6" ||
          document.getElementById("p13box5").value.trim().toLowerCase() !== "7"
        ) {
          alert("❌ Nah. Mrs. James needs you to be more careful!");
          return;
        }
      }
      // Page 14: check required answers for some boxes
      if (currentPage === 14) {
        if (
          document.getElementById("p14box1").value.trim().toLowerCase() !== "1" ||
          document.getElementById("p14box9").value.trim().toLowerCase() !== "9" ||
          document.getElementById("p14box10").value.trim().toLowerCase() !== "third" ||
          document.getElementById("p14box11").value.trim().toLowerCase() !== "sum" ||
          document.getElementById("p14box12").value.trim().toLowerCase() !== "difference"
        ) {
          alert("❌ Nah. Mrs. James needs you to be more careful!");
          return;
        }
      }
      
      if (currentPage < totalPages) {
        currentPage++;
        showPage(currentPage);
      }
    }
    
    function prevPage() {
      if (currentPage > 1) {
        currentPage--;
        showPage(currentPage);
      }
    }
    
    // Persist typeable input values using localStorage.
    function setupPersistence() {
      const inputs = document.querySelectorAll("input.typeable");
      inputs.forEach(el => {
        const stored = localStorage.getItem(el.id);
        if(stored !== null) {
          el.value = stored;
        }
        el.addEventListener("input", () => {
          localStorage.setItem(el.id, el.value);
        });
      });
    }
    
    // Draggable functionality for Page 11.
    function makeDraggable(el) {
      el.onmousedown = function(e) {
        e.preventDefault();
        let offsetX = e.clientX - parseInt(window.getComputedStyle(el).left);
        let offsetY = e.clientY - parseInt(window.getComputedStyle(el).top);
        function moveHandler(e) {
          el.style.left = (e.clientX - offsetX) + 'px';
          el.style.top = (e.clientY - offsetY) + 'px';
        }
        function upHandler() {
          document.removeEventListener('mousemove', moveHandler);
          document.removeEventListener('mouseup', upHandler);
        }
        document.addEventListener('mousemove', moveHandler);
        document.addEventListener('mouseup', upHandler);
      };
    }
    
    document.addEventListener("DOMContentLoaded", function() {
      showPage(currentPage);
      setupPersistence();
      document.querySelectorAll('.draggable').forEach(el => {
        makeDraggable(el);
      });
      // Setup unlock button on Page 15.
      document.getElementById("unlockBtn").addEventListener("click", function(){
         let yellowInput = document.getElementById("p15yellow");
         let val = yellowInput.value.trim().toLowerCase();
         if(val === "121"){
           alert("✅Great job! Ask the merchant for the rest of the code.");
         } else if(val === "121ja"){
           window.open("https://daryeaye.github.io/geotopia/batele.pdf", "_blank");
           yellowInput.value = "";
           localStorage.setItem("p15yellow", "");
         } else {
           alert("❌ Nah. Mrs. James needs you to be more careful!");
         }
      });
    });
  </script>
</body>
</html>
